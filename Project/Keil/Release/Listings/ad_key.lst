C51 COMPILER V9.60.7.0   AD_KEY                                                            05/20/2025 17:56:00 PAGE 1   


C51 COMPILER V9.60.7.0, COMPILATION OF MODULE AD_KEY
OBJECT MODULE PLACED IN .\Release\Objects\ad_key.obj
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.EXE ..\..\User\ad_key.c LARGE OPTIMIZE(8,SIZE) BROWSE INTVECTOR(0X000C) INCD
                    -IR(..\..\Libraries\Include;..\..\User;..\..\User\lib;..\..\Hardware) INTERVAL(3) DEBUG OBJECTEXTEND PRINT(.\Release\List
                    -ings\ad_key.lst) OBJECT(.\Release\Objects\ad_key.obj)

line level    source

   1          #include "ad_key.h"
   2          
   3          // è‡ªå®šä¹‰adæŒ‰é”®çš„é”®å€¼:
   4          enum
   5          {
   6              AD_KEY_ID_ONE_LEFT = 0x01,
   7              AD_KEY_ID_TWO_LEFT,
   8              AD_KEY_ID_THREE_LEFT,
   9              AD_KEY_ID_ONE_RIGHT,
  10              AD_KEY_ID_TWO_RIGHT,
  11              AD_KEY_ID_THREE_RIGHT,
  12          };
  13          
  14          // å®šä¹‰æŒ‰é”®æ‰«æå‡½æ•°ä¸­ï¼Œå„ä¸ªæ‰«æçŠ¶æ€ï¼š
  15          enum
  16          {
  17              AD_KEY_SCAN_STATUS_NONE,                  // ç©ºçŠ¶æ€ï¼Œæ£€æµ‹æ˜¯å¦æœ‰æŒ‰é”®æŒ‰ä¸‹
  18              AD_KEY_SCAN_STATUS_IS_DETECT_LOOG_PRESS,  // æ­£åœ¨æ£€æµ‹æ˜¯å¦ä¸ºé•¿æŒ‰ï¼ˆè¦è·Ÿæ£€æµ‹é•¿æŒ‰ä½œåŒºåˆ†
             -ï¼‰
  19              AD_KEY_SCAN_STATUS_IS_HANDLE_LONG_PRESS,  // æ­£åœ¨å¤„ç†é•¿æŒ‰
  20              AD_KEY_SCAN_STATUS_IS_HANDLE_HOLD_PRESS,  // æ­£åœ¨å¤„ç†é•¿æŒ‰æŒç»­ï¼ˆä¸æ¾æ‰‹ï¼‰
  21              AD_KEY_SCAN_STATUS_IS_HANDLE_SHORT_PRESS, // æ­£åœ¨å¤„ç†çŸ­æŒ‰
  22          
  23              AD_KEY_SCAN_STATUS_IS_WAIT_SHORT_PRESS_RELEASE, // æ­£åœ¨ç­‰å¾…çŸ­æŒ‰æ¾å¼€
  24              AD_KEY_SCAN_STATUS_IS_WAIT_LONG_PRESS_RELEASE,  // æ­£åœ¨ç­‰å¾…é•¿æŒ‰æ¾å¼€
  25              AD_KEY_SCAN_STATUS_IS_END,                      // æ”¶å°¾å¤„ç†
  26          };
  27          static volatile u8 ad_key_scan_status = 0; // éé˜»å¡çš„æŒ‰é”®æ‰«æå‡½æ•°ä¸­ï¼Œä½¿ç”¨çš„çŠ¶æ€æœº
  28          
  29          // å­˜æ”¾æŒ‰é”®å¯¹åº”çš„adå€¼:
  30          static const u16 ad_key_scan_table[][2] = {
  31              // [][0]æŒ‰é”®å¯¹åº”çš„æ ‡å·,åœ¨åˆ¤æ–­æŒ‰é”®é”®å€¼æ—¶ä½¿ç”¨   [][1]æŒ‰é”®å¯¹åº”çš„adå€¼
  32              {AD_KEY_ID_ONE_LEFT, AD_KEY_ONE_LEFT_VAL},
  33              {AD_KEY_ID_TWO_LEFT, AD_KEY_TWO_LEFT_VAL},
  34              {AD_KEY_ID_THREE_LEFT, AD_KEY_THREE_LEFT_VAL},
  35              {AD_KEY_ID_ONE_RIGHT, AD_KEY_ONE_RIGHT_VAL},
  36              {AD_KEY_ID_TWO_RIGHT, AD_KEY_TWO_RIGHT_VAL},
  37              {AD_KEY_ID_THREE_RIGHT, AD_KEY_THREE_RIGHT_VAL},
  38          };
  39          
  40          // å°†é‡‡é›†åˆ°çš„adå€¼è½¬æ¢æˆè‡ªå®šä¹‰çš„é”®å€¼
  41          static u16 __conver_cur_ad_to_ad_key(u16 cur_ad_key)
  42          {
  43   1          u8 i = 0;
  44   1          u16 ad_key_id = 0;
  45   1      
  46   1          // ARRAY_SIZE(ad_key_scan_table) è¿™é‡Œæ˜¯æ±‚å‡ºæ•°ç»„ä¸­å­˜æ”¾çš„æŒ‰é”®ä¸ªæ•°
  47   1          for (i = 0; i < ARRAY_SIZE(ad_key_scan_table); i++)
  48   1          {
  49   2              if (cur_ad_key > (ad_key_scan_table[i][1] - AD_KEY_INTERVAL) &&
  50   2                  cur_ad_key < (ad_key_scan_table[i][1] + AD_KEY_INTERVAL))
  51   2              {
  52   3                  // å¦‚æœä¹‹å‰æœªæ£€æµ‹åˆ°æŒ‰é”®ï¼Œç°åœ¨æ£€æµ‹åˆ°æŒ‰é”®æŒ‰ä¸‹
C51 COMPILER V9.60.7.0   AD_KEY                                                            05/20/2025 17:56:00 PAGE 2   

  53   3                  ad_key_id = ad_key_scan_table[i][0]; // è·å–adå€¼å¯¹åº”çš„é”®å€¼
  54   3                  break;
  55   3              }
  56   2          }
  57   1      
  58   1          return ad_key_id;
  59   1      }
  60          
  61          // éé˜»å¡çš„æŒ‰é”®æ‰«æå‡½æ•°
  62          // å†…éƒ¨çš„æ¯”è¾ƒåªä¼šæ¯”å¯¹è‡ªå®šä¹‰çš„é”®å€¼(id)
  63          void ad_key_scan(void)
  64          {
  65   1          volatile u16 ad_key_id = 0;             // å•æ¬¡æŒ‰é”®æ ‡å¿—
  66   1          static u16 ad_key_last_id = 0;          // ç”¨äºå­˜æ”¾é•¿æŒ‰æ—¶ï¼Œå¯¹åº”çš„æŒ‰é”®
  67   1          static volatile u32 touch_time_cnt = 0; // é•¿æŒ‰è®¡æ•°å€¼
  68   1      
  69   1          adc_sel_pin(ADC_PIN_TOUCH); // å†…éƒ¨è‡³å°‘å ç”¨1ms
  70   1          /* æŒ‰é”®æ‰«æå‡½æ•° */
  71   1          // ad_key_id = adc_getval(); // æ¯æ¬¡è°ƒç”¨çº¦å ç”¨370usï¼Œå¯ä»¥å¿½ç•¥ä¸è®¡
  72   1          ad_key_id = adc_single_convert(); // ç›´æ¥ç”¨å•æ¬¡è½¬æ¢,ä¸å–å¹³å‡å€¼,é˜²æ­¢è¯†åˆ«ä¸åˆ°æŒ‰é”®
  73   1          // printf("ad key val %u \n", ad_key_id);
  74   1          // printf("ad_key_id val %u\n", ad_key_id);
  75   1          ad_key_id = __conver_cur_ad_to_ad_key(ad_key_id); // å°†é‡‡é›†åˆ°çš„adå€¼è½¬æ¢æˆè‡ªå®šä¹‰çš„é”®å€¼
  76   1      
  77   1          // // æµ‹è¯•ç”¨ï¼š
  78   1          //     if (0 != ad_key_id)
  79   1          //     {
  80   1          //         printf("ad_key_id id : %u\n", ad_key_id);
  81   1          //     }
  82   1      
  83   1          if (AD_KEY_SCAN_STATUS_NONE == ad_key_scan_status) // æœªæ£€æµ‹åˆ°æŒ‰é”®æ—¶
  84   1          {
  85   2              // å¦‚æœæœ‰æŒ‰é”®æŒ‰ä¸‹ï¼ˆå¹¶ä¸”ä¹‹å‰æ‰«æåˆ°çš„ä¸æ˜¯é•¿æŒ‰ï¼‰
  86   2              // åˆ¤æ–­æ˜¯å¦ä¸ºé•¿æŒ‰ï¼š
  87   2      
  88   2              if (0 == ad_key_last_id)
  89   2              {
  90   3                  // å¦‚æœä¹‹å‰æœªæ£€æµ‹åˆ°æŒ‰é”®ï¼Œç°åœ¨æ£€æµ‹åˆ°æŒ‰é”®æŒ‰ä¸‹:
  91   3                  ad_key_last_id = ad_key_id;
  92   3              }
  93   2              else if (ad_key_last_id == ad_key_id)
  94   2              {
  95   3                  // å¦‚æœä¸Šæ¬¡æ£€æµ‹åˆ°çš„æŒ‰é”®ä¸æ­¤æ¬¡çš„æŒ‰é”®ç›¸ç­‰ï¼Œè¯´æ˜æŒ‰é”®è¿˜æœªæ¾å¼€
  96   3                  // touch_time_cnt += (1 + ONE_CYCLE_TIME_MS);
  97   3                  touch_time_cnt += (ONE_CYCLE_TIME_MS);
  98   3      
  99   3                  if (touch_time_cnt >= LONG_PRESS_TIME_THRESHOLD_MS)
 100   3                  {
 101   4                      // å¦‚æœé•¿æŒ‰è¶…è¿‡äº†è®¾ç½®çš„é•¿æŒ‰æ—¶é—´
 102   4                      // è·³è½¬åˆ°é•¿æŒ‰å¤„ç†
 103   4                      touch_time_cnt = 0; // æ¸…é™¤é•¿æŒ‰æ—¶é—´è®¡æ•°
 104   4      #if USE_MY_DEBUG
                              printf("long press\n"); // æµ‹è¯•ç”¨
              #endif
 107   4                      ad_key_scan_status = AD_KEY_SCAN_STATUS_IS_HANDLE_LONG_PRESS;
 108   4                  }
 109   3              }
 110   2              else
 111   2              {
 112   3                  // å¦‚æœä¸Šæ¬¡æ£€æµ‹åˆ°çš„æŒ‰é”®ä¸æ­¤æ¬¡çš„æŒ‰é”®ä¸ç›¸ç­‰ï¼Œå¹¶ä¸”ä¸Šæ¬¡æ£€æµ‹åˆ°çš„æŒ‰é”®ä
             -¸ç­‰äº0
 113   3                  // touch_time_cnt = 0; // æ¸…é™¤é•¿æŒ‰æ—¶é—´è®¡æ•°ï¼ˆå¯ä»¥ç•™åˆ°æ”¶å°¾å¤„ç†ï¼‰
C51 COMPILER V9.60.7.0   AD_KEY                                                            05/20/2025 17:56:00 PAGE 3   

 114   3      
 115   3                  // è·³è½¬åˆ°çŸ­æŒ‰å¤„ç†
 116   3                  ad_key_scan_status = AD_KEY_SCAN_STATUS_IS_HANDLE_SHORT_PRESS;
 117   3      #if USE_MY_DEBUG
                          printf("short press\n"); // æµ‹è¯•ç”¨
              #endif
 120   3              }
 121   2      
 122   2              // delay_ms(1); //
 123   2          }
 124   1      
 125   1          if (AD_KEY_SCAN_STATUS_IS_HANDLE_SHORT_PRESS == ad_key_scan_status)
 126   1          {
 127   2              // å¦‚æœæ˜¯æ­£åœ¨å¤„ç†çŸ­æŒ‰
 128   2              if (AD_KEY_ID_ONE_LEFT == ad_key_last_id)
 129   2              {
 130   3                  // å¦‚æœ  è¢«è§¦æ‘¸
 131   3      #if USE_MY_DEBUG
                          printf("one left press\n");
              #endif
 134   3                  send_data(SEND_TOUCH_KEY_STATUS, TOUCH_KEY_VAL_VOL_DEC);
 135   3              }
 136   2              else if (AD_KEY_ID_TWO_LEFT == ad_key_last_id)
 137   2              {
 138   3                  // å¦‚æœ  è¢«è§¦æ‘¸
 139   3      #if USE_MY_DEBUG
                          printf("two left press\n");
              #endif
 142   3                  send_data(SEND_TOUCH_KEY_STATUS, TOUCH_KEY_VAL_MUTE);
 143   3              }
 144   2              else if (AD_KEY_ID_THREE_LEFT == ad_key_last_id)
 145   2              {
 146   3                  // å¦‚æœ  è¢«è§¦æ‘¸
 147   3      #if USE_MY_DEBUG
                          printf("three left press\n");
              #endif
 150   3                  send_data(SEND_TOUCH_KEY_STATUS, TOUCH_KEY_VAL_VOL_INC);
 151   3              }
 152   2              else if (AD_KEY_ID_ONE_RIGHT == ad_key_last_id)
 153   2              {
 154   3                  // å¦‚æœ  è¢«è§¦æ‘¸
 155   3      #if USE_MY_DEBUG
                          printf("one right press\n");
              #endif
 158   3                  send_data(SEND_TOUCH_KEY_STATUS, TOUCH_KEY_VAL_PRE);
 159   3              }
 160   2              else if (AD_KEY_ID_TWO_RIGHT == ad_key_last_id)
 161   2              {
 162   3                  // å¦‚æœ  è¢«è§¦æ‘¸
 163   3      #if USE_MY_DEBUG
                          printf("two right press\n");
              #endif
 166   3                  send_data(SEND_TOUCH_KEY_STATUS, TOUCH_KEY_VAL_MODE);
 167   3              }
 168   2              else if (AD_KEY_ID_THREE_RIGHT == ad_key_last_id)
 169   2              {
 170   3                  // å¦‚æœ  è¢«è§¦æ‘¸
 171   3      #if USE_MY_DEBUG
                          printf("three right press\n");
              #endif
 174   3                  send_data(SEND_TOUCH_KEY_STATUS, TOUCH_KEY_VAL_NEXT);
 175   3              }
C51 COMPILER V9.60.7.0   AD_KEY                                                            05/20/2025 17:56:00 PAGE 4   

 176   2              else
 177   2              {
 178   3                  // å¦‚æœæ²¡æœ‰æŒ‰é”®è¢«è§¦æ‘¸
 179   3              }
 180   2      
 181   2              ad_key_scan_status = AD_KEY_SCAN_STATUS_IS_WAIT_SHORT_PRESS_RELEASE;
 182   2          }
 183   1      
 184   1          if (AD_KEY_SCAN_STATUS_IS_HANDLE_LONG_PRESS == ad_key_scan_status)
 185   1          {
 186   2              // å¤„ç†é•¿æŒ‰
 187   2              if (AD_KEY_ID_ONE_LEFT == ad_key_last_id)
 188   2              {
 189   3                  // å¦‚æœ  è¢«è§¦æ‘¸
 190   3      #if USE_MY_DEBUG
                          // printf("one left long press\n");
              #endif
 193   3                  // è¿™ä¸ªæŒ‰é”®æ²¡æœ‰é•¿æŒ‰å¯¹åº”çš„æ“ä½œ
 194   3              }
 195   2              else if (AD_KEY_ID_TWO_LEFT == ad_key_last_id)
 196   2              {
 197   3                  // å¦‚æœ  è¢«è§¦æ‘¸
 198   3      #if USE_MY_DEBUG
                          printf("two left long press\n");
              #endif
 201   3                  send_data(SEND_TOUCH_KEY_STATUS, TOUCH_KEY_VAL_POWER);
 202   3              }
 203   2              else if (AD_KEY_ID_THREE_LEFT == ad_key_last_id)
 204   2              {
 205   3                  // å¦‚æœ  è¢«è§¦æ‘¸
 206   3      #if USE_MY_DEBUG
                          // printf("three left long press\n");
              #endif
 209   3                  // è¿™ä¸ªæŒ‰é”®æ²¡æœ‰é•¿æŒ‰å¯¹åº”çš„æ“ä½œ
 210   3              }
 211   2              else if (AD_KEY_ID_ONE_RIGHT == ad_key_last_id)
 212   2              {
 213   3                  // å¦‚æœ  è¢«è§¦æ‘¸
 214   3      #if USE_MY_DEBUG
                          // printf("one right long press\n");
              #endif
 217   3                  // è¿™ä¸ªæŒ‰é”®æ²¡æœ‰é•¿æŒ‰å¯¹åº”çš„æ“ä½œ
 218   3              }
 219   2              else if (AD_KEY_ID_TWO_RIGHT == ad_key_last_id)
 220   2              {
 221   3                  // å¦‚æœ  è¢«è§¦æ‘¸
 222   3      #if USE_MY_DEBUG
                          printf("two right long press\n");
              #endif
 225   3                  send_data(SEND_TOUCH_KEY_STATUS, TOUCH_KEY_VAL_MAIN);
 226   3              }
 227   2              else if (AD_KEY_ID_THREE_RIGHT == ad_key_last_id)
 228   2              {
 229   3                  // å¦‚æœ  è¢«è§¦æ‘¸
 230   3      
 231   3      #if USE_MY_DEBUG
                          // printf("three right long press\n");
              #endif
 234   3                  // è¿™ä¸ªæŒ‰é”®æ²¡æœ‰é•¿æŒ‰å¯¹åº”çš„æ“ä½œ
 235   3              }
 236   2      
 237   2              ad_key_scan_status = AD_KEY_SCAN_STATUS_IS_HANDLE_HOLD_PRESS; // è·³è½¬åˆ°é•¿æŒ‰æŒç»­
C51 COMPILER V9.60.7.0   AD_KEY                                                            05/20/2025 17:56:00 PAGE 5   

 238   2          }
 239   1      
 240   1          if (AD_KEY_SCAN_STATUS_IS_HANDLE_HOLD_PRESS == ad_key_scan_status)
 241   1          {
 242   2              // å¤„ç†é•¿æŒ‰æŒç»­
 243   2      
 244   2              if (ad_key_last_id == ad_key_id)
 245   2              {
 246   3                  touch_time_cnt++;
 247   3                  if (AD_KEY_ID_ONE_LEFT == ad_key_last_id)
 248   3                  {
 249   4                      if (touch_time_cnt >= HOLD_PRESS_TIME_THRESHOLD_MS)
 250   4                      {
 251   5                          touch_time_cnt = 0;
 252   5      #if USE_MY_DEBUG
                                  printf("one left continue press\n");
              #endif
 255   5                          send_data(SEND_TOUCH_KEY_STATUS, TOUCH_KEY_VAL_VOL_DEC);
 256   5                      }
 257   4                  }
 258   3                  else if (AD_KEY_ID_TWO_LEFT == ad_key_last_id)
 259   3                  {
 260   4                      if (touch_time_cnt >= HOLD_PRESS_TIME_THRESHOLD_MS)
 261   4                      {
 262   5                          touch_time_cnt = 0;
 263   5      #if USE_MY_DEBUG
                                  // printf("two left continue press\n");
              #endif
 266   5                          // è¿™ä¸ªæŒ‰é”®æ²¡æœ‰é•¿æŒ‰æŒç»­å¯¹åº”çš„æ“ä½œ
 267   5                      }
 268   4                  }
 269   3                  else if (AD_KEY_ID_THREE_LEFT == ad_key_last_id)
 270   3                  {
 271   4                      if (touch_time_cnt >= HOLD_PRESS_TIME_THRESHOLD_MS)
 272   4                      {
 273   5                          touch_time_cnt = 0;
 274   5      #if USE_MY_DEBUG
                                  // printf("three left continue press\n");
              #endif
 277   5                          send_data(SEND_TOUCH_KEY_STATUS, TOUCH_KEY_VAL_VOL_INC);
 278   5                      }
 279   4                  }
 280   3                  else if (AD_KEY_ID_ONE_RIGHT == ad_key_last_id)
 281   3                  {
 282   4                      if (touch_time_cnt >= HOLD_PRESS_TIME_THRESHOLD_MS)
 283   4                      {
 284   5                          touch_time_cnt = 0;
 285   5      #if USE_MY_DEBUG
                                  // printf("one right continue press\n");
              #endif
 288   5                          // è¿™ä¸ªæŒ‰é”®æ²¡æœ‰é•¿æŒ‰æŒç»­å¯¹åº”çš„æ“ä½œ
 289   5                      }
 290   4                  }
 291   3                  else if (AD_KEY_ID_TWO_RIGHT == ad_key_last_id)
 292   3                  {
 293   4                      if (touch_time_cnt >= HOLD_PRESS_TIME_THRESHOLD_MS)
 294   4                      {
 295   5                          touch_time_cnt = 0;
 296   5      #if USE_MY_DEBUG
                                  // printf("two right continue press\n");
              #endif
 299   5                          // è¿™ä¸ªæŒ‰é”®æ²¡æœ‰é•¿æŒ‰æŒç»­å¯¹åº”çš„æ“ä½œ
C51 COMPILER V9.60.7.0   AD_KEY                                                            05/20/2025 17:56:00 PAGE 6   

 300   5                      }
 301   4                  }
 302   3                  else if (AD_KEY_ID_THREE_RIGHT == ad_key_last_id)
 303   3                  {
 304   4                      if (touch_time_cnt >= HOLD_PRESS_TIME_THRESHOLD_MS)
 305   4                      {
 306   5                          touch_time_cnt = 0;
 307   5      #if USE_MY_DEBUG
                                  // printf("three right continue press\n");
              #endif
 310   5                          // è¿™ä¸ªæŒ‰é”®æ²¡æœ‰é•¿æŒ‰æŒç»­å¯¹åº”çš„æ“ä½œ
 311   5                      }
 312   4                  }
 313   3      
 314   3                  delay_ms(1);
 315   3              }
 316   2              else
 317   2              {
 318   3                  // å¦‚æœä¹‹å‰æ£€æµ‹åˆ°çš„æŒ‰é”®ä¸å½“å‰æ£€æµ‹åˆ°çš„æŒ‰é”®ä¸ä¸€è‡´ï¼Œ
 319   3                  // è¯´æ˜ å¯èƒ½æ¾å¼€äº†æ‰‹ æˆ–æ˜¯ ä¸€åªæ‰‹æŒ‰ä½äº†åŸæ¥çš„æŒ‰é”®å¦ä¸€åªæ‰‹æŒ‰äº†å…¶ä»–æ
             -Œ‰é”®
 320   3      
 321   3                  // è·³è½¬åˆ°ç­‰å¾…é•¿æŒ‰æ¾å¼€
 322   3                  ad_key_scan_status = AD_KEY_SCAN_STATUS_IS_WAIT_LONG_PRESS_RELEASE;
 323   3              }
 324   2          }
 325   1      
 326   1          if ((AD_KEY_SCAN_STATUS_IS_WAIT_LONG_PRESS_RELEASE == ad_key_scan_status) ||
 327   1              (AD_KEY_SCAN_STATUS_IS_WAIT_SHORT_PRESS_RELEASE == ad_key_scan_status))
 328   1          {
 329   2              // å¦‚æœæ˜¯ç­‰å¾…æŒ‰é”®æ¾å¼€
 330   2              static volatile u16 loose_cnt = 0; // å­˜æ”¾æ¾æ‰‹è®¡æ•°å€¼
 331   2      
 332   2              if (0 == ad_key_id)
 333   2              {
 334   3                  // å¦‚æœå½“å‰æ£€æµ‹åˆ°ä¸€æ¬¡é”®å€¼idä¸ºç©º
 335   3                  loose_cnt += ONE_CYCLE_TIME_MS;
 336   3                  // delay_ms(1);
 337   3              }
 338   2              else
 339   2              {
 340   3                  // åªè¦æœ‰ä¸€æ¬¡æ£€æµ‹åˆ°æŒ‰é”®ï¼Œè¯´æ˜æ²¡æœ‰æ¾å¼€æ‰‹
 341   3                  loose_cnt = 0;
 342   3              }
 343   2      
 344   2              if (loose_cnt >= LOOSE_PRESS_CNT_MS) // è¿™é‡Œçš„æ¯”è¾ƒå€¼éœ€è¦æ³¨æ„ï¼Œä¸èƒ½å¤§äºå˜é‡ç±»å‹å
             -¯¹åº”çš„æœ€å¤§å€¼
 345   2              {
 346   3                  loose_cnt = 0; // æ¸…ç©ºæ¾æ‰‹è®¡æ•°
 347   3                  // å¦‚æœ xx mså†…æ²¡æœ‰æ£€æµ‹åˆ°æŒ‰é”®æŒ‰ä¸‹ï¼Œè¯´æ˜å·²ç»æ¾å¼€æ‰‹
 348   3      
 349   3                  if (AD_KEY_SCAN_STATUS_IS_WAIT_LONG_PRESS_RELEASE == ad_key_scan_status)
 350   3                  {
 351   4                      if (AD_KEY_ID_ONE_LEFT == ad_key_last_id)
 352   4                      {
 353   5      #if USE_MY_DEBUG
                                  // printf("one left long press loose\n");
              #endif
 356   5                      }
 357   4                      else if (AD_KEY_ID_TWO_LEFT == ad_key_last_id)
 358   4                      {
 359   5      #if USE_MY_DEBUG
C51 COMPILER V9.60.7.0   AD_KEY                                                            05/20/2025 17:56:00 PAGE 7   

                                  // printf("two left long press loose\n");
              #endif
 362   5                      }
 363   4                      else if (AD_KEY_ID_THREE_LEFT == ad_key_last_id)
 364   4                      {
 365   5      #if USE_MY_DEBUG
                                  // printf("three left long press loose\n");
              #endif
 368   5                      }
 369   4                      else if (AD_KEY_ID_ONE_RIGHT == ad_key_last_id)
 370   4                      {
 371   5      #if USE_MY_DEBUG
                                  // printf("one right long press loose\n");
              #endif
 374   5                      }
 375   4                      else if (AD_KEY_ID_TWO_RIGHT == ad_key_last_id)
 376   4                      {
 377   5      #if USE_MY_DEBUG
                                  // printf("two right long press loose\n");
              #endif
 380   5                      }
 381   4                      else if (AD_KEY_ID_THREE_RIGHT == ad_key_last_id)
 382   4                      {
 383   5      #if USE_MY_DEBUG
                                  // printf("three right long press loose\n");
              #endif
 386   5                      }
 387   4                  }
 388   3      
 389   3                  ad_key_scan_status = AD_KEY_SCAN_STATUS_IS_END; // è·³è½¬åˆ°æ”¶å°¾å¤„ç†
 390   3              }
 391   2          }
 392   1      
 393   1          if (AD_KEY_SCAN_STATUS_IS_END == ad_key_scan_status)
 394   1          {
 395   2              // æ”¶å°¾å¤„ç†
 396   2              ad_key_id = 0;
 397   2              ad_key_last_id = 0;
 398   2              touch_time_cnt = 0;
 399   2      
 400   2              ad_key_scan_status = AD_KEY_SCAN_STATUS_NONE;
 401   2          }
 402   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    938    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =     33       4
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
